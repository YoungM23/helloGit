家庭记账系统

# 架构

## 服务拆分

- member-service
- account-service
- Login-service

## 技术栈

es，Redis，springcloud，rabbitmq，mybatisPlus，docker部署

# 需求概念



总资产=净资产 + 负债



- 总资产
  - 投资
    - 长钱账户
    - 稳钱账户
    - 基金
    - 股票
    - 银行理财
    - 定期存款/大额存单
    - 个人养老金账户
    - 年金险
    - 增额寿险
  - 流动资金
    - 银行活期
    - 支付宝
    - 微信
    - 货币基金
    - 自定义流动资金
  - 固定资产
    - 房产（自住）
    - 房产（投资）
    - 汽车
    - 车位
    - 金银珠宝
    - 收藏品
    - 自定义固定资产
  - 应收款
    - 借给他人的钱
    - 自定义应收款
- 负债
  - 房贷
  - 信用卡
  - 个人借款
  - 花呗
  - 京东白条
  - 房屋贷款
  - 汽车贷款
  - 网贷
  - 自定义负债
- 净资产

净资产=总资产-负债

# 数据库设计

member表，account表，asset_record表

- 通过asset_record表的account_id，和账户account绑定。一个account有多条记录
  - 前端查询展示的时候使用最新一条数据。
  - 资产变化：最新一次数据和上次一次数据比较
  - 环比变化：当月最后一次数据和上月最后一次数据比较

## 用户member

| 字段名           | 含义                                                         | 备注 |
| ---------------- | ------------------------------------------------------------ | ---- |
| id               |                                                              |      |
| name             | 名字                                                         |      |
| pwd              | 密码                                                         |      |
| famliy_member_id | 家庭成员的id，如果有，说明该用户是属于另外一个用户的家庭成员，且没有登录密码 |      |



## 账户account

| 字段名          | 含义     | 备注                                        |
| --------------- | -------- | :------------------------------------------ |
| id              |          |                                             |
| name            | 账户名   |                                             |
| member_id       | 用户id   |                                             |
| type            | 账户类型 | 活钱/稳健/长期/不标记，负债是没有这些的     |
| first_classify  | 一级分类 | 投资/流动资金/固定资产/投资理财/应收款/负债 |
| second_classify | 二级分类 | 股票/基金/银行活期/应收账款等等             |
| currency        | 币种     |                                             |
| remark          | 备注     |                                             |

## 资产记录asset_record

account和asset_record是一对多的关系

该表只新增，不修改

| 字段名     | 含义     | 备注 |
| ---------- | -------- | :--- |
| id         |          |      |
| amount     | 金额     |      |
| account_id | 账户id   |      |
| creat_time | 创建时间 |      |

# 功能

## member-service

### 用户登录功能

### 用户的家庭成员crud

## account-service

### 账户的crud

### 资产更新

## login-service
